# Description: open source electronics design automation suite
# URL: http://kicad-pcb.org/
# Maintainer: David Brooke, crux at dbrooke dot me dot uk
# Depends on: wxpython glew boost swig

name=kicad
version=4.0.7
release=1
source=(https://launchpad.net/$name/${version%.*}/$version/+download/$name-$version.tar.xz
        http://kicad-pcb.org/boost-1.61.patch)

build() {
	cd $name-$version

	export CXXFLAGS+=" -std=c++11"
	patch -p1 -i $SRC/boost-1.61.patch

	mkdir build
	cd build
	cmake -DKICAD_SCRIPTING=ON -DKICAD_SCRIPTING_MODULES=ON -DKICAD_SCRIPTING_WXPYTHON=ON -DKICAD_SKIP_BOOST=ON -DCMAKE_INSTALL_PREFIX=/usr ..
	make
	make DESTDIR=$PKG install
	rm -r $PKG/usr/share/doc/ $PKG/usr/lib/kicad/plugins/README-bom.txt
}
